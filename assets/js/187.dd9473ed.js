(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{745:function(_,t,v){"use strict";v.r(t);var a=v(12),r=Object(a.a)({},(function(){var _=this,t=_.$createElement,v=_._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("p",[_._v("Keywords: ç¼“å­˜æŠ—è¯»å†™ã€æ•°æ®åº“æ‰©å±•ï¼ˆåˆ—æ‰©å±•+è¡Œæ‰©å±•ï¼‰ã€æ‰¹é‡æ“ä½œã€è®¡æ•°ç³»ç»Ÿä¸ä¸šåŠ¡ç³»ç»Ÿåˆ†ç¦»ã€ä¸šåŠ¡æ‹“å±•æ€§ã€è¯»å†™æ•ˆç‡")]),_._v(" "),v("h2",{attrs:{id:"_1-ä¸€äº›æ¦‚å¿µ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä¸€äº›æ¦‚å¿µ"}},[_._v("#")]),_._v(" 1. ä¸€äº›æ¦‚å¿µ")]),_._v(" "),v("p",[_._v("QPSï¼šå¹¶å‘é‡ / å¹³å‡å“åº”æ—¶é—´ã€‚å³æ¯ç§’çš„å“åº”è¯·æ±‚æ•°ï¼Œä¹Ÿæ˜¯æœ€å¤§ååèƒ½åŠ›ã€‚")]),_._v(" "),v("h2",{attrs:{id:"_2-æ€è·¯è€ƒè™‘"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-æ€è·¯è€ƒè™‘"}},[_._v("#")]),_._v(" 2. æ€è·¯è€ƒè™‘")]),_._v(" "),v("p",[_._v("Redis åšç¼“å­˜å±‚ï¼Œæ•°æ®å›ºåŒ–è½åˆ° DB ä¸Šã€‚æ ¸å¿ƒæ•°æ®è®¾è®¡ï¼š")]),_._v(" "),v("ul",[v("li",[_._v("mysqlï¼št_count(msg_id, parise_count)")]),_._v(" "),v("li",[_._v("redis(k-v): key: msg_id; value: praise_count")])]),_._v(" "),v("p",[_._v("ç‰©ç†æœºä¾æ‰˜ mysql å’Œ redisï¼Œ"),v("strong",[_._v("æ°´å¹³æ‹“å±•")]),_._v("ä¸æ˜¯é—®é¢˜ã€‚")]),_._v(" "),v("h2",{attrs:{id:"_3-è®¡æ•°ç³»ç»Ÿçš„éš¾ç‚¹ä¸ä¼˜åŒ–"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-è®¡æ•°ç³»ç»Ÿçš„éš¾ç‚¹ä¸ä¼˜åŒ–"}},[_._v("#")]),_._v(" 3. è®¡æ•°ç³»ç»Ÿçš„éš¾ç‚¹ä¸ä¼˜åŒ–")]),_._v(" "),v("h3",{attrs:{id:"_3-1-çœŸå®ä¸šåŠ¡åœºæ™¯"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-çœŸå®ä¸šåŠ¡åœºæ™¯"}},[_._v("#")]),_._v(" 3.1 çœŸå®ä¸šåŠ¡åœºæ™¯")]),_._v(" "),v("p",[v("strong",[_._v("è®°æ•°ç³»ç»Ÿçš„éš¾ç‚¹åœ¨äºï¼šä¸šåŠ¡æ‹“å±•æ€§ï¼Œä»¥åŠè¯»å†™æ•ˆç‡")]),_._v("ã€‚")]),_._v(" "),v("p",[_._v("ä¸šåŠ¡æ‹“å±•æ€§ï¼šä½“ç°åœ¨ä¸‹é¢è¿™å¼ å›¾ä¸­ï¼Œä¸€ä¸ªæ¶ˆæ¯ä¸­ï¼Œé™¤äº†ç‚¹èµæ•°ï¼Œè¿˜æœ‰è¯„è®ºã€è½¬å‘ã€é˜…è¯»æ•°ã€‚")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://mmbiz.qpic.cn/mmbiz_png/YrezxckhYOxGzpnZYxOulLGX3uicUg1mzeXGCSzMnBl3ibv6nUx3OA115ypmiaWKYlMNNzDq5mrS4tpmANKpvceIg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1",alt:"img"}})]),_._v(" "),v("p",[_._v("æ•ˆç‡ï¼šä¸€ä¸ªé¡µé¢ä¸­ï¼Œæœ‰å¾ˆå¤šæ¡æ¶ˆæ¯ï¼ˆåªèƒ½åœ¨ä»£ç ä¸­å¾ªç¯æ¯ä¸€æ¡æ¶ˆæ¯ï¼‰ã€‚")]),_._v(" "),v("h3",{attrs:{id:"_3-2-ä¸€ç§ä¸ç®—å®Œç¾çš„è§£å†³æ–¹æ¡ˆ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-ä¸€ç§ä¸ç®—å®Œç¾çš„è§£å†³æ–¹æ¡ˆ"}},[_._v("#")]),_._v(" 3.2 ä¸€ç§ä¸ç®—å®Œç¾çš„è§£å†³æ–¹æ¡ˆ")]),_._v(" "),v("p",[_._v("Redis çš„ k-v è®¾è®¡ä¸Šï¼Œk çš„ç”Ÿæˆè§„åˆ™å¯ä»¥ä½¿ç”¨ï¼š"),v("code",[_._v("msg_id:ä¸šåŠ¡flag")]),_._v(" çš„æ ¼å¼ã€‚æ¯”å¦‚å¯¹äºç¬¬ä¸€æ¡æ¶ˆæ¯çš„é˜…è¯»æ•°ï¼Œå®ƒçš„ key å°±æ˜¯ï¼š"),v("code",[_._v("1:read")]),_._v("ï¼›å¯¹äºè¯„è®ºæ•°ï¼š"),v("code",[_._v("1:comment")]),_._v("ã€‚")]),_._v(" "),v("p",[_._v("åœ¨é’ˆå¯¹æŒ‡å®šæ¶ˆæ¯æŸ¥è¯¢çš„æ—¶å€™ï¼Œéœ€è¦å¯¹ redis å‘èµ·å¤šæ¬¡ RPC è°ƒç”¨ã€‚æµªè´¹æ¬¡æ•°ã€‚")]),_._v(" "),v("p",[_._v("Mysql çš„è®¾è®¡ä¸Šï¼Œå¸¸è§å°±æ˜¯"),v("strong",[_._v("åˆ—æ‰©å±•")]),_._v("ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("msg_id")]),_._v(" "),v("th",[_._v("read_count")]),_._v(" "),v("th",[_._v("comment_count")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("1")]),_._v(" "),v("td",[_._v("100000")]),_._v(" "),v("td",[_._v("1000")])]),_._v(" "),v("tr",[v("td",[_._v("2")]),_._v(" "),v("td",[_._v("200000")]),_._v(" "),v("td",[_._v("2000")])])])]),_._v(" "),v("p",[_._v("ä½†æ˜¯æ›´æ”¹è¡¨ç»“æ„çš„æ—¶å€™ï¼Œå­˜åœ¨ç€æ•ˆç‡é—®é¢˜ã€‚")]),_._v(" "),v("h3",{attrs:{id:"_3-3-æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆ"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆ"}},[_._v("#")]),_._v(" 3.3 æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆ")]),_._v(" "),v("p",[_._v("é’ˆå¯¹ Redisï¼Œèƒ½åšçš„å°±æ˜¯é™ä½å•ç‹¬æ¶ˆæ¯çš„ RPC è°ƒç”¨æ¬¡æ•°ï¼Œå‡å°‘ Redis è®¿é—®æ¬¡æ•°ã€‚"),v("strong",[_._v("å¯ä»¥å°† count çš„è®¡æ•°ï¼Œæ”¾åœ¨åŒä¸€ä¸ª value ä¸­")]),_._v("ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("Key")]),_._v(" "),v("th",[_._v("value")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("1")]),_._v(" "),v("td",[_._v("100000:1000")])])])]),_._v(" "),v("p",[_._v("é’ˆå¯¹ Mysqlï¼Œå¯ä»¥ä½¿ç”¨"),v("strong",[_._v("è¡Œæ‰©å±•")]),_._v("æ¥è§£å†³åˆ—æ‰©å±•é—®é¢˜ï¼Œè¡¨ç»“æ„è®¾è®¡å¦‚ä¸‹ï¼š")]),_._v(" "),v("table",[v("thead",[v("tr",[v("th",[_._v("msg_id")]),_._v(" "),v("th",[_._v("count_key")]),_._v(" "),v("th",[_._v("count_value")])])]),_._v(" "),v("tbody",[v("tr",[v("td",[_._v("1")]),_._v(" "),v("td",[_._v("read")]),_._v(" "),v("td",[_._v("100000")])]),_._v(" "),v("tr",[v("td",[_._v("1")]),_._v(" "),v("td",[_._v("comment")]),_._v(" "),v("td",[_._v("1000")])])])]),_._v(" "),v("h3",{attrs:{id:"_3-4-è¯»å†™æ•ˆç‡é—®é¢˜"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-è¯»å†™æ•ˆç‡é—®é¢˜"}},[_._v("#")]),_._v(" 3.4 è¯»å†™æ•ˆç‡é—®é¢˜")]),_._v(" "),v("p",[_._v("å¯¹äºè®¡æ•°ç³»ç»Ÿæ¥è¯´ï¼Œè¯»çš„æ¬¡æ•°è¿œè¿œå¤§äºå†™çš„æ¬¡æ•°ã€‚"),v("strong",[_._v("å› æ­¤ï¼Œå½±å“è¯»å†™æ•ˆç‡çš„ä¸»è¦æ˜¯è¯»æ“ä½œ")]),_._v("ã€‚å¯¹äº redis çš„ valu ç»“æ„ä¼˜åŒ–æ¥è¯´ï¼Œå†™çš„è¯éœ€è¦ 2 æ¬¡ RPCï¼Œè¯»çš„è¯ä»…éœ€ 1 æ¬¡ï¼Œä½¿ç”¨å†™æ•ˆç‡æ¢è¯»æ•ˆç‡ã€‚")]),_._v(" "),v("h2",{attrs:{id:"ğŸ”—-å‚è€ƒé“¾æ¥"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ”—-å‚è€ƒé“¾æ¥"}},[_._v("#")]),_._v(" ğŸ”— å‚è€ƒé“¾æ¥")]),_._v(" "),v("ul",[v("li",[v("a",{attrs:{href:"https://mp.weixin.qq.com/s/vKV0ENUdCmjgRvt8MV-C2Q",target:"_blank",rel:"noopener noreferrer"}},[_._v("æ¯ç§’ 30W æ¬¡çš„ç‚¹èµä¸šåŠ¡ï¼Œæ€ä¹ˆä¼˜åŒ–ï¼Ÿ"),v("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);